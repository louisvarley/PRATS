{% extends "base.html" %}

{% block title %}sales{% endblock %}

{% block body %}
	{% embed "Forms/form-base.html" with {'form_id': controller} %}

		{% block form_title %}
			{% if( id ) %}Editing{% else %}New{% endif %} {{ title }}
		{% endblock %}

		{% block form_subtitle %}
			{{ description }}
		{% endblock %}
		
		{% block form_body %}

			{% if( rat.id ) %}

				{% include "Notes/list.html" with {
					'notes': rat.notes,
					'type': "rat",
					'id': rat.id
				}%}	
				
				{% include "Forms/Elements/hidden.html" with {
					'id': 'id', 
					'name': "#{controller}[id]", 
					'readonly': 'readonly',
					'value': rat.id
				}%}
				
				<hr class="my-4">		

			{% endif %}

				{% include "Forms/Elements/image-uploader.html" with {
					'id': 'rat_images',
					'name': "#{controller}[image]", 
					'image': rat.image,
					'default': properties.DEFAULT_RAT_AVATAR,
					'label': 'Profile Photo',
					'description': 'Optional Images for this Rat'
				}%}		
			
			
				{% include "Forms/Elements/text.html" with {
					'label' : 'Registration Code',
					'id': 'code', 
					'name': "#{controller}[code]", 
					'description': 'Official Registration Code',
					'readonly': 'readonly',
					'value': rat.code
				}%}							
			
			{% if( rat.id ) %}
			
			{% endif %}	

			{% include "Forms/Elements/text.html" with {
				'label' : 'Name',
				'id': 'name', 
				'name': "#{controller}[name]", 
				'description': 'The Rats Pet Name',
				'value': rat.name
			}%}
						

			{% include "Forms/Elements/select.html" with {
				'label' : 'Status',		
				'id': 'status', 
				'name': "#{controller}[status]", 
				'description': 'Status of this Rat?',
				'required': 'required',
				'value': rat.status,
				'options': optionsets.rat_status				
			}%}					

			{% include "Forms/Elements/select.html" with {
				'label' : 'Gender',		
				'id': 'gender', 
				'name': "#{controller}[gender]", 
				'description': 'Gender of this Rat?',
				'required': 'required',
				'value': rat.gender,
				'options': optionsets.genders			
			}%}		

			<hr class="my-4">
				
			{% include "Forms/Elements/select.html" with {
				'label' : 'Litter',		
				'id': 'litter', 
				'name': "#{controller}[litter]", 
				'description': 'This Rats Litter?',
				'value': rat.litter.id,
				'options': litters			
			}%}		
			
			{% include "Forms/Elements/select.html" with {
				'label' : 'Country of Origin',		
				'id': 'country', 
				'name': "#{controller}[country]", 
				'description': 'Gender of this Rat?',
				'value': rat.country,
				'options': countries			
			}%}		

			

			{% include "Forms/Elements/text-date.html" with {
				'label' : 'Date',	
				'id': 'date', 
				'readonly': '{% if( rat.litter.id ) %}readonly{{% endif %}',
				'name': "#{controller}[birthDate]", 
				'description': 'Date this litter was born',
				'required': 'required',
				'value' : rat.birthDate				
			}%}					
	
			<hr class="my-4">
			
			{% include "Forms/Elements/select.html" with {
				'label' : 'Owner',		
				'id': 'owner', 
				'name': "#{controller}[owner]", 
				'description': 'Owner of this Rat?',
				'value': rat.owner.Id,
				'options': users			
			}%}			
			
			{% if( rat.id ) %}
			
				{% if( rat.litter.id ) %}
			
					{% include "Forms/Elements/text.html" with {
						'label' : 'Father',
						'id': 'father', 
						'name': "#{controller}[registration]", 
						'description': 'The Name of this rats Father',
						'readonly': 'readonly',
						'value': rat.litter.buck.Name
					}%}	

					{% include "Forms/Elements/text.html" with {
						'label' : 'Mother',
						'id': 'mother', 
						'name': "#{controller}[registration]", 
						'description': 'The Name of this rats Mother',
						'readonly': 'readonly',
						'value': rat.litter.doe.Name
					}%}		
					
				{% endif %}	
			{% endif %}	
		
		{% endblock %}
	{% endembed %}
{% endblock %}



